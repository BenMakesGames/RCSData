{% extends 'RCSDataBundle::base.html.twig' %}

{% block additionalScripts %}
    {{ parent() }}

    <script>
        $(function() {
            if($('#rcs_bundle_databundle_reporttype_latitude').val() == '' || $('#rcs_bundle_databundle_reporttype_longitude').val() == '')
            {
                if(navigator && navigator.geolocation && navigator.geolocation.getCurrentPosition)
                {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        latitude = position.coords.latitude;
                        longitude = position.coords.longitude;

                        $('#rcs_bundle_databundle_reporttype_latitude').val(latitude);
                        $('#rcs_bundle_databundle_reporttype_longitude').val(longitude);
                    });
                }
            }
        });
    </script>
{% endblock %}

{% block content %}
    <h1>View/Edit Report</h1>
    <p>Fields marked with <span class="required"></span> are required.</p>
    <form action="{{ path('report_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(edit_form) }}>
        <input type="hidden" name="_method" value="PUT" />
        {{ form_widget(edit_form) }}
        <p>
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <a href="{{ path('report') }}" class="btn">
                Cancel
            </a>
        </p>
    </form>

        <form action="{{ path('report_delete', { 'id': entity.id }) }}" method="post">
            <input type="hidden" name="_method" value="DELETE" />
            {{ form_widget(delete_form) }}
            <button type="submit" class="btn btn-danger"><span class="icon-white icon-trash"></span> Delete</button>
        </form>
    </li>
{% endblock %}
